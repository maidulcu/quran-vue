<template>
  <div>
    <div v-if="error" class="error">
      {{ error }}
    </div>
    <vue-headful v-if="suraMeta.length>0"
             :title="'Surah ' + suraMeta[0].englishName + ' ['+suraMeta[0].number+':'+this.$route.params.ayah_id+'] ' + suraMeta[0].name + ' - Al-Quran (القرآن)'"
             :description="'Al-Quran Surah' + suraMeta[0].englishName"
         />
    <b-row class="mt-5 mb-5" v-if="suraMeta.length>0">
      <div class="col-2 text-left align-self-center">
        <router-link
          v-if="(suraMeta[0].numberOfAyahs > parseInt(this.$route.params.ayah_id)-1) && parseInt(this.$route.params.ayah_id)-1>0"
          :to="{ name: 'Ayah', params: { surah_id: this.$route.params.surah_id, ayah_id: parseInt(this.$route.params.ayah_id)-1 }}"
          tag="span"
          active-class="active">
             <a class="nav-link pagination-link"><i class="quran-icon icon-left-open">&#xe808;</i></a>
        </router-link>
      </div>
      <div class="col-8">
        <h1 class="text-center surah-title">
          <router-link :to="{ name: 'Surah', params: { surah_id: parseInt(this.$route.params.surah_id) }}">
          {{suraMeta[0].englishName}} ({{this.$route.params.surah_id}}:{{this.$route.params.ayah_id}}) {{suraMeta[0].name}}
          </router-link>
        </h1>
      </div>
      <div class="col-2 text-right align-self-center">
        <router-link
          v-if="suraMeta[0].numberOfAyahs >= parseInt(this.$route.params.ayah_id)+1"
          :to="{ name: 'Ayah', params: { surah_id: this.$route.params.surah_id, ayah_id: parseInt(this.$route.params.ayah_id)+1 }}"
          tag="span"
          active-class="active">
             <a class="nav-link pagination-link"><i class="quran-icon icon-right-open">&#xe807;</i></a>
        </router-link>
      </div>
    </b-row>
    <b-row class="mb-5" v-for="(value, index) in data" :key="value.identifier">

        <div class="col-12 mb-3">

          <div v-if="index==0" class="ayah-meta float-left">

              <button class="audio" v-on:click="getAudio" :data-ayah="value.number">
                 <i class="quran-icon icon-play">&#xe803;</i>
              </button>
                <button
                  v-clipboard:copy="value.text"
                  v-clipboard:success="handleCopyStatus(true)"
                  v-clipboard:error="handleCopyStatus(false)"
                ><i class="quran-icon icon-link">&#xe800;</i>
                </button>

          </div>

        <div v-if="index==0" class="basmala float-right mb-2">
          <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
           width="728.000000pt" height="249.000000pt" viewBox="0 0 728.000000 249.000000"
           preserveAspectRatio="xMidYMid meet">
          <g transform="translate(0.000000,249.000000) scale(0.100000,-0.100000)"
          fill="#000000" stroke="none">
          <path d="M4052 2438 c-16 -43 -18 -63 -11 -103 7 -42 48 -597 79 -1090 5 -71
          16 -242 25 -380 10 -137 15 -289 12 -337 -2 -49 -1 -88 4 -88 16 0 49 112 60
          202 12 100 13 74 -41 808 -16 217 -34 476 -40 575 -6 99 -13 186 -15 193 -6
          17 5 15 26 -4 10 -9 22 -14 28 -13 14 6 -87 289 -103 289 -2 0 -13 -24 -24
          -52z"/>
          <path d="M3530 2429 c-58 -22 -165 -62 -239 -89 -74 -28 -138 -53 -142 -57 -4
          -5 -10 -19 -14 -32 -6 -18 -4 -23 6 -19 8 3 82 33 164 65 83 33 194 77 248 97
          58 23 101 45 107 57 16 28 -8 24 -130 -22z"/>
          <path d="M3855 2420 c-14 -42 -15 -62 -6 -118 6 -37 15 -161 21 -277 6 -115
          20 -329 31 -475 46 -632 48 -676 37 -715 -14 -44 -79 -104 -134 -124 -21 -7
          -93 -39 -159 -71 -128 -62 -188 -110 -295 -238 -59 -70 -115 -108 -176 -117
          -34 -6 -45 -3 -70 18 -27 23 -29 30 -29 94 0 37 8 94 18 125 17 57 18 57 50
          50 17 -4 75 -7 127 -7 79 0 108 5 170 28 141 52 283 188 339 324 28 68 39 206
          22 269 -6 22 -25 56 -43 76 -69 76 -172 103 -360 95 -163 -6 -216 -23 -283
          -90 -45 -45 -53 -60 -63 -112 -6 -33 -10 -69 -7 -80 4 -16 -8 -28 -55 -57 -56
          -35 -59 -36 -65 -17 -15 45 13 152 62 244 26 49 129 174 149 182 8 3 21 -3 29
          -13 13 -17 16 -17 25 -4 5 8 10 25 10 36 0 12 6 26 13 32 21 18 302 158 384
          192 43 18 85 38 93 46 20 17 45 103 34 114 -14 13 -326 40 -535 47 -178 6
          -188 5 -232 -16 -34 -17 -51 -33 -66 -65 -40 -82 -23 -119 103 -220 53 -42 96
          -81 96 -85 0 -4 -14 -23 -31 -42 -59 -65 -120 -164 -140 -229 -11 -36 -24
          -112 -29 -170 l-9 -105 -58 -50 c-31 -27 -132 -120 -223 -205 -325 -305 -404
          -360 -516 -360 -132 0 -154 84 -79 294 43 120 41 158 -4 62 -70 -149 -91 -276
          -62 -378 31 -108 118 -141 240 -91 89 37 206 130 411 328 117 113 235 224 261
          246 l47 39 13 -37 c20 -64 59 -122 106 -158 24 -18 49 -35 55 -37 7 -3 3 -27
          -11 -71 -25 -75 -30 -173 -12 -228 17 -53 80 -109 129 -116 50 -7 120 24 158
          70 14 18 67 74 117 126 79 80 106 100 187 140 52 26 120 58 152 70 108 43 167
          118 203 256 19 74 19 173 0 435 -9 113 -20 275 -25 360 -5 85 -17 241 -25 345
          -8 105 -15 201 -15 214 l0 25 20 -22 c29 -30 44 -28 36 6 -12 50 -97 262 -106
          262 -5 0 -16 -23 -25 -50z m-385 -678 l35 -8 -95 -45 c-52 -25 -128 -67 -168
          -92 l-72 -47 -43 38 c-23 21 -73 63 -112 92 -38 29 -72 55 -75 57 -2 2 2 9 10
          14 17 12 464 4 520 -9z m100 -513 c119 -19 186 -74 204 -167 17 -94 -94 -226
          -260 -310 -127 -64 -259 -78 -380 -41 -56 17 -79 31 -121 74 -29 28 -53 61
          -53 71 0 18 82 74 110 74 6 0 37 -27 68 -59 62 -65 104 -81 155 -62 54 21 81
          125 55 213 -23 79 -86 104 -195 77 -49 -13 -66 -3 -61 35 4 25 96 76 167 92
          71 15 226 17 311 3z m-296 -265 c34 -34 -15 -47 -65 -17 -16 10 -29 21 -29 25
          0 15 78 8 94 -8z"/>
          <path d="M3694 2245 c-4 -15 0 -44 10 -68 20 -52 20 -67 2 -67 -23 0 -39 29
          -47 87 -8 62 -14 72 -31 55 -9 -9 -9 -23 0 -58 11 -40 10 -50 -3 -70 -8 -13
          -22 -24 -30 -24 -18 0 -37 34 -35 63 6 74 -10 101 -32 52 -8 -17 -8 -28 -1
          -37 6 -7 11 -33 11 -57 1 -58 27 -86 64 -72 15 5 29 20 33 31 l7 22 19 -21
          c31 -33 58 -27 75 16 9 20 13 46 10 57 -3 12 -11 42 -18 69 -14 53 -25 59 -34
          22z"/>
          <path d="M6085 1750 c-11 -12 -26 -51 -35 -87 -18 -69 -20 -70 -39 -12 -14 44
          -64 94 -85 86 -9 -4 -21 -18 -28 -31 -14 -33 3 -56 42 -56 29 0 30 -1 60 -86
          15 -44 16 -54 4 -65 -7 -8 -17 -30 -20 -49 -7 -35 -7 -35 14 -17 11 11 26 16
          32 12 6 -4 -2 -15 -21 -28 -47 -32 -52 -64 -28 -182 11 -55 23 -134 27 -175 4
          -54 8 -68 13 -50 13 47 9 131 -11 231 -11 55 -18 104 -16 108 3 5 27 14 53 21
          95 25 98 68 10 133 -18 12 -18 16 3 97 26 104 36 117 62 93 17 -15 21 -15 28
          -3 13 21 12 32 -6 58 -19 27 -36 28 -59 2z"/>
          <path d="M5120 1715 c-19 -8 -129 -49 -245 -91 -115 -42 -215 -82 -221 -88 -7
          -6 -15 -21 -18 -33 l-7 -22 63 25 c111 45 291 115 373 145 73 27 105 49 105
          71 0 11 -9 10 -50 -7z"/>
          <path d="M1635 1606 c-85 -32 -362 -135 -413 -153 -30 -11 -44 -22 -48 -39 -4
          -14 -5 -26 -3 -28 2 -2 81 27 174 64 94 38 209 83 257 100 63 24 89 39 97 56
          13 29 12 29 -64 0z"/>
          <path d="M1914 1533 c-20 -46 -20 -38 0 -293 23 -300 30 -444 22 -473 -12 -49
          -63 -94 -144 -127 -129 -54 -268 -129 -317 -172 -26 -23 -78 -78 -115 -123
          -74 -88 -145 -135 -204 -135 -96 1 -112 108 -46 304 37 107 45 155 20 116 -21
          -32 -71 -162 -86 -222 -49 -189 66 -345 209 -284 18 7 86 70 151 139 128 136
          166 162 349 239 110 47 137 66 176 125 61 92 75 157 73 348 -1 94 -6 208 -11
          255 -5 47 -7 87 -5 89 2 3 15 -6 29 -19 l25 -23 0 22 c0 18 -34 120 -82 244
          -14 37 -25 34 -44 -10z"/>
          <path d="M2536 1546 c-16 -15 -29 -46 -37 -85 -12 -56 -29 -83 -29 -46 0 28
          -40 94 -66 112 -26 16 -27 16 -45 -6 -11 -13 -19 -29 -19 -36 0 -19 38 -48 55
          -41 19 7 51 -54 61 -116 4 -21 10 -38 14 -38 11 0 28 47 41 117 6 35 17 71 25
          80 11 16 16 16 35 5 14 -9 25 -10 31 -4 15 15 1 60 -22 72 -16 9 -25 6 -44
          -14z"/>
          <path d="M2115 1514 c-19 -47 -19 -38 -1 -299 27 -382 37 -609 31 -667 -16
          -134 45 -4 65 140 9 66 -6 405 -25 571 l-5 45 23 -22 c29 -28 37 -28 37 0 0
          22 -86 246 -101 262 -4 5 -15 -9 -24 -30z"/>
          <path d="M6592 1523 c-21 -4 -82 -82 -82 -105 0 -4 38 -8 84 -8 90 0 146 -8
          146 -20 0 -5 -44 -32 -97 -60 -157 -84 -161 -95 -18 -54 92 26 98 29 149 85
          63 71 95 124 80 139 -23 23 -187 37 -262 23z"/>
          <path d="M5547 1478 c-21 -56 -22 -67 -14 -103 12 -57 49 -711 45 -813 -4
          -120 7 -127 39 -26 31 99 37 192 24 382 -6 92 -14 208 -17 257 -6 89 -6 90 13
          73 21 -19 43 -24 43 -9 0 5 -21 62 -46 128 -25 65 -48 126 -51 136 -9 27 -19
          20 -36 -25z"/>
          <path d="M1744 1485 c-5 -19 0 -44 14 -77 17 -41 18 -50 6 -55 -17 -6 -44 14
          -44 33 0 30 -22 114 -30 114 -15 0 -20 -34 -10 -75 10 -46 -7 -85 -39 -85 -23
          0 -32 31 -24 86 6 48 -7 62 -33 33 -15 -17 -16 -24 -6 -39 7 -11 12 -39 12
          -63 0 -73 50 -101 90 -50 19 25 23 26 31 10 17 -30 57 -21 76 18 15 32 15 38
          -2 97 -23 77 -32 89 -41 53z"/>
          <path d="M4390 1489 c-7 -11 -9 -27 -6 -34 3 -8 1 -28 -5 -44 -12 -35 0 -66
          31 -76 11 -3 20 -10 20 -13 0 -4 -31 -31 -69 -59 -53 -40 -71 -60 -76 -84 -9
          -39 12 -59 61 -59 45 0 154 36 184 61 l25 21 -35 -7 c-161 -29 -210 -32 -210
          -12 0 7 20 23 45 35 27 13 56 38 73 62 26 39 29 41 70 36 42 -4 45 -2 58 31
          22 52 5 86 -70 137 -47 31 -81 33 -96 5z m60 -88 c0 -25 -3 -28 -25 -23 -27 5
          -32 21 -13 40 21 21 38 13 38 -17z m70 -8 c23 -30 15 -39 -24 -29 -19 5 -22
          11 -18 31 6 32 15 32 42 -2z"/>
          <path d="M4998 1474 c-13 -12 -8 -77 7 -104 19 -34 18 -50 -3 -50 -25 0 -42
          20 -42 50 0 41 -20 101 -31 94 -7 -4 -8 -28 -4 -65 8 -64 -3 -89 -36 -89 -21
          0 -27 20 -31 94 -3 47 -4 49 -21 32 -14 -14 -16 -28 -11 -74 4 -31 12 -68 18
          -82 15 -34 51 -37 78 -7 21 23 22 23 40 5 21 -21 29 -22 51 -5 32 23 36 68 13
          141 -11 37 -24 64 -28 60z"/>
          <path d="M7078 1413 c-13 -34 -13 -70 0 -143 17 -97 51 -206 92 -293 22 -47
          37 -92 34 -100 -10 -26 -73 -50 -117 -44 -55 8 -79 34 -85 96 -2 28 -8 51 -11
          51 -4 0 -15 -15 -23 -34 -37 -77 -111 -136 -171 -136 -50 0 -91 62 -76 114 5
          16 6 32 3 35 -3 3 -34 -25 -69 -61 -77 -81 -114 -101 -182 -102 -63 -1 -91 21
          -134 106 -16 31 -33 59 -39 63 -15 9 -75 -23 -105 -57 -15 -16 -41 -60 -59
          -97 -26 -55 -31 -78 -31 -136 l1 -70 -85 -50 c-90 -54 -156 -102 -237 -174
          -126 -114 -151 -129 -224 -138 -45 -5 -51 -3 -81 26 -31 31 -31 34 -26 99 3
          39 20 110 41 172 20 58 35 112 33 120 -4 19 -72 -124 -93 -197 -62 -214 57
          -379 219 -303 23 11 87 57 142 102 152 125 203 162 279 204 47 25 71 34 74 26
          2 -7 21 -34 42 -61 95 -120 218 -103 235 32 8 61 -14 136 -48 170 -17 17 -33
          22 -77 22 -30 0 -74 -4 -96 -9 -40 -8 -42 -7 -52 21 -13 39 4 78 53 126 53 51
          70 48 100 -15 13 -29 30 -60 37 -68 66 -79 166 -62 267 45 29 30 53 55 55 55
          2 0 8 -17 14 -38 16 -53 52 -83 104 -89 36 -4 49 0 83 25 22 16 51 49 65 74
          l23 45 21 -41 c29 -57 80 -89 130 -83 52 7 86 34 116 93 21 41 25 62 24 134 0
          72 -6 103 -42 209 -45 132 -49 152 -30 133 15 -15 38 -15 38 0 0 17 -100 168
          -112 168 -4 0 -13 -12 -20 -27z m-740 -899 c12 -8 20 -20 17 -25 -12 -18 -64
          -9 -92 16 l-28 24 40 1 c22 0 51 -7 63 -16z"/>
          <path d="M1174 1182 c-44 -21 -74 -57 -92 -109 -12 -35 -10 -167 3 -195 27
          -64 -95 61 -159 162 -45 71 -69 83 -112 55 -66 -43 -127 -183 -126 -287 l1
          -58 -47 -24 c-78 -41 -154 -96 -277 -201 -153 -132 -228 -162 -288 -115 -56
          44 -54 124 9 296 38 106 41 122 19 104 -16 -13 -70 -146 -91 -225 -43 -158 28
          -295 153 -295 53 0 91 22 211 120 153 125 316 239 342 240 3 0 23 -25 45 -55
          58 -80 149 -118 196 -82 30 22 49 75 49 132 0 137 -72 191 -204 151 -44 -13
          -47 -13 -61 7 -22 32 -18 58 16 111 58 87 82 87 134 -5 48 -86 99 -138 176
          -178 36 -20 59 -39 61 -52 4 -27 22 -29 26 -3 2 16 17 23 75 37 47 11 148 54
          287 122 165 80 229 107 273 113 58 7 59 7 79 54 11 26 18 54 15 61 -4 10 -32
          16 -89 20 -52 4 -151 25 -268 57 -221 60 -297 69 -356 42z m158 -117 c40 -9
          121 -30 181 -47 l107 -31 -62 -27 c-35 -15 -85 -37 -113 -50 -97 -44 -171 -68
          -225 -71 l-55 -4 -29 77 c-34 89 -30 117 16 147 39 25 82 26 180 6z m-411
          -395 c28 -15 24 -40 -6 -40 -30 0 -85 26 -85 40 0 13 66 13 91 0z"/>
          <path d="M5234 1143 c-17 -41 -18 -34 26 -227 11 -50 41 -133 66 -185 l45 -95
          -19 -26 c-15 -20 -29 -26 -70 -28 -120 -7 -159 60 -208 358 -17 105 -53 223
          -69 222 -5 0 -18 -28 -27 -62 -15 -55 -15 -67 -3 -104 34 -101 46 -275 24
          -333 -25 -68 -96 -115 -174 -117 -66 -1 -100 17 -125 69 -26 53 -26 119 1 256
          26 136 23 174 -11 174 -48 0 -101 -113 -155 -333 -40 -165 -78 -209 -137 -162
          -38 30 -52 107 -45 249 4 63 4 111 1 108 -15 -15 -34 -122 -34 -196 0 -183 72
          -300 164 -265 30 12 55 70 94 225 22 86 50 174 62 195 l21 39 -7 -35 c-3 -19
          -10 -53 -15 -75 -13 -64 -10 -187 6 -243 23 -77 64 -118 130 -132 64 -13 111
          -3 161 35 41 31 82 99 98 161 l11 45 20 -56 c23 -69 83 -139 131 -155 43 -15
          105 -8 139 14 64 42 92 185 60 306 -9 35 -30 104 -47 153 -17 48 -28 90 -25
          93 3 3 15 1 26 -6 16 -8 21 -8 21 3 0 18 -98 167 -110 167 -5 0 -17 -17 -26
          -37z"/>
          <path d="M2360 1060 c-11 -21 -20 -44 -20 -49 0 -11 83 -71 98 -71 13 0 52 62
          52 83 0 17 -76 77 -97 77 -7 0 -22 -18 -33 -40z"/>
          <path d="M7142 615 c-12 -25 -22 -48 -22 -50 0 -2 12 -11 28 -19 15 -8 38 -23
          51 -35 13 -11 28 -18 32 -15 11 6 49 79 49 93 0 10 -91 71 -106 71 -6 0 -20
          -20 -32 -45z"/>
          <path d="M7080 411 c-69 -26 -184 -69 -257 -96 -104 -39 -134 -54 -143 -73 -6
          -14 -9 -26 -7 -29 3 -2 105 36 228 85 123 49 241 94 261 101 31 10 59 44 46
          56 -1 1 -59 -18 -128 -44z"/>
          <path d="M669 365 c-7 -19 -16 -35 -19 -35 -4 0 -24 13 -46 30 -21 16 -44 30
          -50 30 -6 0 -22 -21 -35 -46 l-23 -46 27 -22 c15 -12 40 -29 57 -39 l30 -18
          17 35 c9 20 20 36 23 36 4 0 24 -13 46 -30 21 -16 44 -30 50 -30 5 0 20 21 32
          46 17 35 20 49 12 60 -11 13 -93 64 -104 64 -2 0 -10 -16 -17 -35z"/>
          <path d="M4440 306 c-371 -137 -379 -141 -390 -165 -6 -13 -9 -25 -7 -28 3 -2
          81 26 173 62 93 36 205 80 249 97 78 30 115 52 115 70 0 14 -21 9 -140 -36z"/>
          <path d="M2858 325 c-3 -3 -113 -45 -244 -93 -199 -73 -241 -91 -251 -112 -7
          -14 -9 -26 -4 -28 5 -2 64 19 132 46 68 27 180 71 249 97 135 52 150 60 150
          81 0 14 -21 19 -32 9z"/>
          <path d="M860 230 c-41 -16 -154 -58 -250 -93 -149 -55 -177 -68 -188 -91 -8
          -15 -12 -29 -10 -30 1 -2 74 25 162 60 87 35 201 80 255 100 87 32 121 53 121
          76 0 12 -7 10 -90 -22z"/>
          </g>
          </svg>

        </div>
        <div class="clearfix"></div>

          <div
              v-bind:class="[value.edition.identifier=='quran-simple' ? 'text-arabic font-mequran' : 'text-others']">
              <div v-bind:class="'language-type-' + value.edition.language">
                <h4 v-if="index!=0" class="edition-meta">{{value.edition.englishName}}</h4>
                <p>
                  <span>{{value.text}}</span>
                  <span v-if="index==0">
                    <span class="ayah-ending">۝<span class="ayah-number">{{value.numberInSurah | arabicLatter}}</span></span>
                  </span>
                </p>
                <div v-if="index==0" class="ayah-meta">
                  <span v-if="value.sajda" v-b-tooltip.hover v-bind:title="'sajda'" class="sajda-icon">
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    	 viewBox="0 0 496.5 496.5" style="enable-background:new 0 0 496.5 496.5;" xml:space="preserve">
                    <g>
                    	<path d="M232.621,167.346c33.164,0,59.357,8.343,75.746,24.127c12.218,11.768,14.855,23.726,14.901,23.944
                    		c0.407,2.015,2.179,3.408,4.16,3.408c0.274,0,0.553-0.027,0.832-0.082c2.303-0.457,3.799-2.694,3.342-4.996
                    		c-0.115-0.578-2.97-14.314-16.877-27.947c-12.544-12.296-36.971-26.954-82.104-26.954c-2.348,0-4.25,1.902-4.25,4.25
                    		C228.371,165.444,230.273,167.346,232.621,167.346z"/>
                    	<path d="M52.835,234.038c0.36,5.691,2.193,18.015,11.026,27.164c0.785,0.814,1.61,1.575,2.464,2.298H48.9
                    		c-1.528-0.072-10.911-0.191-18.491,6.852c-6.318,5.87-9.522,14.838-9.522,26.656c0,13.384,3.453,23.441,10.264,29.895
                    		c6.996,6.628,15.232,7.083,17.358,7.083c0.146,0,0.264-0.003,0.35-0.005h138.228c31.871,0,43.024-9.108,46.883-14.763
                    		c0.708,0.184,1.427,0.342,2.157,0.462l115.921,18.739c1.248,0.204,2.518,0.308,3.774,0.308c11.129,0,20.536-7.795,22.706-18.642
                    		c5.618,1.225,11.52,1.826,17.454,1.826c16.877,0,33.934-4.785,45.07-13.298l33.685-0.329c3.41-0.033,6.603-1.393,8.989-3.826
                    		c2.387-2.434,3.683-5.651,3.649-9.061l-0.835-85.126c-0.069-6.968-5.794-12.636-12.76-12.636c-0.014,0-0.112,0-0.126,0
                    		l-37.559,0.366c-4.392-2.847-9.108-5.192-14.048-6.97c-25.517-9.182-52.981-2.131-71.065,15.796
                    		c-2.596-6.767-8.142-17.837-19.306-28.907c-15.891-15.758-46.764-34.542-103.596-34.542l-108.418,0.001
                    		c-1.229-0.014-30.39-0.346-49.971,18.869c-11.237,11.027-16.935,26.135-16.935,44.902L52.835,234.038z M355.822,330.226
                    		c-0.798,0-1.605-0.065-2.409-0.197l-115.92-18.739c-3.876-0.635-7.272-2.741-9.564-5.93c-2.276-3.168-3.191-7.026-2.581-10.875
                    		l18.367-89.521c0.012-0.056,0.021-0.112,0.031-0.168c1.169-7.145,7.261-12.33,14.486-12.33c0.797,0,1.603,0.066,2.397,0.196
                    		l12.47,2.043c3.877,0.634,7.274,2.739,9.566,5.929c2.267,3.155,3.185,6.999,2.59,10.835l-13.215,58.063
                    		c-0.261,1.144-0.037,2.344,0.618,3.316c0.654,0.973,1.682,1.632,2.839,1.821l84.718,13.867c8.001,1.311,13.445,8.887,12.136,16.886
                    		l-1.381,8.437l-69.516-10.644c-2.328-0.356-4.489,1.239-4.845,3.558c-0.355,2.32,1.237,4.489,3.558,4.845l68.756,10.527
                    		C366.49,327.002,361.514,330.226,355.822,330.226z M331.698,262.997c0.453,4.271,1.254,8.523,2.392,12.65l-26.092-4.271
                    		C316.318,269.729,324.865,267.118,331.698,262.997z M455.334,206.315v32.225c0,2.348,1.902,4.25,4.25,4.25
                    		c2.348,0,4.25-1.902,4.25-4.25v-32.308l9.947-0.097c2.325,0,4.236,1.893,4.26,4.22l0.835,85.125
                    		c0.012,1.139-0.422,2.213-1.219,3.026c-0.797,0.813-1.863,1.267-3.002,1.277l-31.01,0.303l-4.346-93.615L455.334,206.315z
                    		 M419.171,199.03c4.045,1.455,7.906,3.365,11.536,5.642l4.535,97.69c-13.228,9.666-36.449,13.556-55.304,9.334l0.802-4.9
                    		c2.066-12.624-6.524-24.577-19.15-26.647l-18.125-2.967c-4.677-13.711-4.93-30.082-0.548-42.258
                    		C354.043,204.003,388.25,187.905,419.171,199.03z M48.477,271.988c0.104,0.008,0.208,0.012,0.313,0.012h88.144
                    		c2.348,0,4.25-1.902,4.25-4.25c0-2.348-1.902-4.25-4.25-4.25H92.396c-0.007,0-0.013-0.002-0.02-0.002
                    		c-9.584,0-17.105-2.743-22.355-8.154c-7.944-8.188-8.701-20.342-8.763-23.391v-24.802c0-16.374,4.826-29.426,14.345-38.792
                    		c16.99-16.719,43.632-16.467,43.981-16.48h108.498c42.416,0,76.032,10.957,97.214,31.687
                    		c13.814,13.519,18.253,27.222,19.204,30.701c-3.969,5.288-7.228,11.242-9.581,17.779c-2.278,6.332-3.483,13.481-3.644,20.851
                    		c-12.161,10.641-38.736,12.442-49.627,12.723l11.926-52.399c0.02-0.085,0.036-0.171,0.051-0.257
                    		c1.001-6.117-0.44-12.258-4.057-17.29c-3.618-5.032-8.978-8.355-15.095-9.356l-12.47-2.043c-1.247-0.204-2.516-0.308-3.771-0.308
                    		c-11.381,0-20.981,8.141-22.86,19.369l-10.347,50.429c-15.848-16.773-57.649-22.42-63.257-23.109
                    		c-2.343-0.283-4.45,1.371-4.736,3.7c-0.287,2.329,1.369,4.449,3.699,4.736c22.806,2.811,59.499,12.65,61.733,27.154l-5.462,26.619
                    		c-0.012,0.056-0.021,0.111-0.031,0.167c-1.002,6.116,0.438,12.256,4.055,17.289c1.434,1.994,3.149,3.708,5.069,5.127
                    		c-3.222,3.6-12.663,10.033-39.009,10.033H48.789c-0.053,0-0.142,0.003-0.194,0.005c-0.266-0.005-6.479,0.179-11.705-4.857
                    		c-2.98-2.871-5.073-6.88-6.279-11.961h66.211c2.348,0,4.25-1.902,4.25-4.25c0-2.348-1.902-4.25-4.25-4.25H29.47
                    		c-0.05-1.026-0.082-2.074-0.082-3.159c0-3.456,0.314-6.571,0.936-9.34h20.001c2.348,0,4.25-1.902,4.25-4.25
                    		c0-2.348-1.902-4.25-4.25-4.25H33.932c0.657-0.92,1.382-1.76,2.18-2.512C41.449,271.629,48.438,271.986,48.477,271.988z"/>
                    	<path d="M492.25,344.623h-488c-2.348,0-4.25,1.902-4.25,4.25c0,2.348,1.902,4.25,4.25,4.25h488c2.348,0,4.25-1.902,4.25-4.25
                    		C496.5,346.525,494.598,344.623,492.25,344.623z"/>
                    </g>
                    </svg>
                  </span>
                </div>
              </div>
            </div>
        </div>

    </b-row>

    <Loader numbers="1" v-if="loading"/>

  </div>
</template>
<script>
const Loader = () => import('@/components/Loader')
import { bus } from '@/main'

let audio = new Audio();

export default {
  name: 'Ayah',
   components: {
    Loader,
  }, 
  data () {
    return {
      loading: false,
      error: null,
      data: [],
      suraMeta: [],
      identifier_selected: localStorage.getItem('identifier_selected') || [],
      audio_identifier: 'ar.alafasy',
      copySucceeded: null,
      thingToCopy: null,
    }
  },
  created: function (){

    // setTimeout(function(){

    //   document.body.classList.add('sidebar-lg-show')

    // }, 100)

    this.fetchAyah()

    bus.$on('identifier_event', obj => {
            // do stuff with obj
            this.identifier_selected = obj
            //make sure if its not running already
            if(!this.loading){
              this.fetchAyah()
            }

        })

  },
  methods: {
    getSurahMeta(){

        this.suraMeta = this.$_.filter(this.surahsJson.data, { 'number': parseInt(this.$route.params.surah_id, 10)})
        //console.log(this.surahsJson.data)
        //console.log(typeof this.$route.params.surah_id)
        //console.log(this.suraMeta)

    },    
    fetchAyah() {

      this.getSurahMeta()

      this.error = null
      this.loading = true
      this.data.length = 0

      if(!this.$route.params.surah_id && !this.$route.params.ayah_id){
        return;
      }
      //console.log(this.$route.params.ayah_id)
      this.$http.get('/ayah/'+this.$route.params.surah_id+':'+this.$route.params.ayah_id+'/'+JSON.parse(this.identifier_selected).toString())
        .then(response => {
          // handle success
          this.loading = false
          this.data = response.data.data

        })
        .catch(error => {
          this.loading = false
          this.error = error.toString()
        });

    },
    getAudio: function(e) {

      //console.log(e.currentTarget.children.classList)

      //e.currentTarget.children.classList.remove('icon-control-play').add('icon-control-pulse')

      let audio_link = 'https://cdn.alquran.cloud/media/audio/ayah/' + this.audio_identifier + '/' + e.currentTarget.getAttribute('data-ayah');

      audio.setAttribute('src',audio_link); //change the source
      //audio.load(); //load the new source
      audio.play(); //play

      //console.log(audio.duration)

    },
    handleCopyStatus(status) {
      this.copySucceeded = status
    },     
  },
  filters: {
      arabicLatter: function(value) {

        if (value == null) {
          return value
        }
        var id= ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];
        return value.toString().replace(/[0-9]/g, function(w){
         return id[+w]
        });

      }
  },
  watch: {
    '$route': 'fetchAyah',
  }  
}
</script>
<style scoped>

  .sajda-icon {
      width: 32px;
      display: inline-block;
      height: 32px;
  }
  .sajda-icon>svg {
        vertical-align: top;
  }
</style>
